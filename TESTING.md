# 功能测试文档

## 📋 测试准备

### 1. 导入数据库

```bash
# 第一步：导入数据库结构
mysql -u root -p manhua_db < database/schema.sql

# 第二步：导入测试数据
mysql -u root -p manhua_db < database/test_data.sql
```

### 2. 配置文件

确保 `config/config.php` 已正确配置：
```php
'database' => [
    'host'     => 'localhost',
    'dbname'   => 'manhua_db',
    'username' => 'root',
    'password' => 'your_password',
],
```

### 3. 目录权限

```bash
chmod 755 public/uploads
```

---

## 🧪 测试数据说明

### 测试数据统计
- **漫画总数**：57条
  - 日更板块：10条
  - 韩漫合集：15条（8个连载 + 7个完结）
  - 完结短漫：12条
  - 日漫推荐：20条（测试分页功能）
  
- **标签总数**：26个自定义标签
  - 日期标签：5个
  - 分类标签：5个
  - 字母标签：6个
  - 作者标签：6个
  - 未分类标签：9个（默认）

- **章节数据**：11条（2个漫画的章节）
- **访问日志**：8条（5个成功，3个失败）

### 默认账号信息
- **管理员账号**：`admin`
- **管理员密码**：`admin123`
- **默认访问码**：`1024`

---

## ✅ 功能测试清单

### 一、后台管理系统测试

#### 1.1 登录功能测试 ✓
**测试路径**：`http://localhost/admin88/login`

| 测试项 | 操作 | 预期结果 | 状态 |
|--------|------|----------|------|
| 正确登录 | 用户名：admin<br>密码：admin123 | 跳转到控制台 | ⬜ |
| 错误密码 | 用户名：admin<br>密码：wrong | 显示错误提示 | ⬜ |
| 错误用户名 | 用户名：test<br>密码：admin123 | 显示错误提示 | ⬜ |
| 空表单提交 | 留空 | HTML5验证提示 | ⬜ |

#### 1.2 控制台功能测试 ✓
**测试路径**：`http://localhost/admin88/`

| 测试项 | 检查内容 | 预期结果 | 状态 |
|--------|----------|----------|------|
| 统计卡片 | 漫画总数 | 显示：57 | ⬜ |
| 统计卡片 | 标签数量 | 显示：26 | ⬜ |
| 统计卡片 | 今日新增 | 显示：0（首次测试） | ⬜ |
| 统计卡片 | 当前访问码 | 显示：1024 | ⬜ |
| 快捷操作 | 4个按钮 | 全部可点击跳转 | ⬜ |
| 最近添加 | 漫画列表 | 显示最新10条 | ⬜ |

#### 1.3 添加漫画功能测试 ✓
**测试路径**：`http://localhost/admin88/manga/add`

| 测试项 | 操作 | 预期结果 | 状态 |
|--------|------|----------|------|
| 选择类型 | 选择"日更板块" | 显示日期标签下拉框 | ⬜ |
| 选择类型 | 选择"韩漫合集" | 显示封面上传+状态选择 | ⬜ |
| 动态标签 | 切换类型 | 标签列表动态更新 | ⬜ |
| 创建标签 | 点击"创建新标签" | 弹出对话框并成功创建 | ⬜ |
| 图片上传 | 选择图片文件 | 显示图片预览 | ⬜ |
| 表单验证 | 留空必填项 | 显示验证错误 | ⬜ |
| 成功添加 | 完整填写提交 | 成功提示+跳转列表 | ⬜ |

#### 1.4 漫画列表功能测试 ✓
**测试路径**：`http://localhost/admin88/manga/list`

| 测试项 | 操作 | 预期结果 | 状态 |
|--------|------|----------|------|
| 列表显示 | 首页加载 | 显示20条/页 | ⬜ |
| 类型筛选 | 选择"日更板块" | 显示10条日更漫画 | ⬜ |
| 标签筛选 | 选择某个标签 | 显示该标签漫画 | ⬜ |
| 状态筛选 | 选择"连载中" | 显示连载漫画 | ⬜ |
| 关键词搜索 | 输入"霸道" | 搜索到相关漫画 | ⬜ |
| 分页功能 | 点击下一页 | 跳转到第2页 | ⬜ |
| 编辑按钮 | 点击编辑图标 | 跳转到编辑页面 | ⬜ |
| 预览按钮 | 点击预览图标 | 新窗口打开详情页 | ⬜ |
| 删除单个 | 点击删除按钮 | 确认后删除成功 | ⬜ |
| 批量选择 | 勾选多个复选框 | 显示已选择数量 | ⬜ |
| 批量删除 | 选择批量删除 | 确认后批量删除 | ⬜ |
| 批量修改标签 | 选择批量修改标签 | 标签更新成功 | ⬜ |
| 批量修改状态 | 选择批量修改状态 | 状态更新成功 | ⬜ |

#### 1.5 漫画编辑功能测试 ✓
**测试路径**：`http://localhost/admin88/manga/edit?id=1`

| 测试项 | 操作 | 预期结果 | 状态 |
|--------|------|----------|------|
| 数据回显 | 打开编辑页 | 所有字段显示原数据 | ⬜ |
| 类型切换 | 更改类型 | 标签列表动态更新 | ⬜ |
| 保留封面 | 不上传新图 | 保留原封面 | ⬜ |
| 更新封面 | 上传新图片 | 旧图删除+新图显示 | ⬜ |
| 封面位置 | 调整展示位置 | top/center/bottom可选 | ⬜ |
| 更新成功 | 修改后提交 | 成功提示+数据更新 | ⬜ |
| 取消按钮 | 点击取消 | 返回列表页 | ⬜ |

#### 1.6 标签管理功能测试 ✓
**测试路径**：`http://localhost/admin88/tags`

| 测试项 | 操作 | 预期结果 | 状态 |
|--------|------|----------|------|
| 列表显示 | 加载页面 | 按类型分组显示标签 | ⬜ |
| 添加标签 | 填写表单提交 | 标签添加成功 | ⬜ |
| 编辑标签 | 修改标签名 | 更新成功 | ⬜ |
| 删除标签 | 删除某个标签 | 关联漫画移至"未分类" | ⬜ |
| 类型过滤 | 选择类型 | 仅显示该类型标签 | ⬜ |

#### 1.7 访问码更新测试 ✓
**测试路径**：`http://localhost/admin88/access-code`

| 测试项 | 操作 | 预期结果 | 状态 |
|--------|------|----------|------|
| 显示当前码 | 加载页面 | 显示当前访问码 1024 | ⬜ |
| 更新访问码 | 输入新码如2025 | 更新成功提示 | ⬜ |
| 空码验证 | 提交空访问码 | 显示错误提示 | ⬜ |
| 访问日志 | 查看日志列表 | 显示历史访问记录 | ⬜ |
| 日志统计 | 查看成功/失败 | 显示正确统计数字 | ⬜ |

#### 1.8 登出功能测试 ✓
**测试路径**：点击侧边栏"退出登录"

| 测试项 | 操作 | 预期结果 | 状态 |
|--------|------|----------|------|
| 登出 | 点击退出登录 | 跳转到登录页 | ⬜ |
| 会话清除 | 登出后访问后台 | 自动跳转登录页 | ⬜ |

---

### 二、前台展示系统测试

#### 2.1 主界面测试 ✓
**测试路径**：`http://localhost/`

| 测试项 | 操作 | 预期结果 | 状态 |
|--------|------|----------|------|
| 页面布局 | 打开首页 | 9宫格卡片整齐排列 | ⬜ |
| 欢迎信息 | 查看顶部 | 显示"欢迎来到海の小窝🐋" | ⬜ |
| 卡片图标 | 查看9个卡片 | 每个卡片有图标+标题+描述 | ⬜ |
| 响应式 | 缩小窗口 | 布局自适应 | ⬜ |

#### 2.2 访问码验证测试 ✓
**测试路径**：点击任意模块卡片

| 测试项 | 操作 | 预期结果 | 状态 |
|--------|------|----------|------|
| 弹窗显示 | 点击卡片 | 弹出访问码输入框 | ⬜ |
| 正确访问码 | 输入1024 | 验证成功+跳转模块 | ⬜ |
| 错误访问码 | 输入0000 | 显示"访问码错误" | ⬜ |
| 空码验证 | 直接点提交 | 提示"请输入访问码" | ⬜ |
| 回车提交 | 输入码后按Enter | 自动提交验证 | ⬜ |
| 取码教程 | 查看弹窗底部 | 显示3个取码链接 | ⬜ |
| 验证保持 | 验证后访问其他模块 | 无需再次验证 | ⬜ |

#### 2.3 日更板块测试 ✓
**测试路径**：`http://localhost/daily`

| 测试项 | 操作 | 预期结果 | 状态 |
|--------|------|----------|------|
| 标签显示 | 查看页面 | 显示5个日期标签 | ⬜ |
| 标签排序 | 查看顺序 | 最新日期在上 | ⬜ |
| 漫画列表 | 查看内容 | 每个标签下显示漫画 | ⬜ |
| 资源链接 | 点击"夸克网盘"按钮 | 新窗口打开链接 | ⬜ |
| 详情跳转 | 点击漫画标题 | 跳转到详情页 | ⬜ |
| 未分类显示 | 查看列表 | 未分配标签的显示在"未分类" | ⬜ |

#### 2.4 韩漫合集测试 ✓
**测试路径**：`http://localhost/korean`

| 测试项 | 操作 | 预期结果 | 状态 |
|--------|------|----------|------|
| 分类标签 | 查看顶部 | 显示5个分类+全部 | ⬜ |
| 状态筛选 | 点击"连载中" | 仅显示连载漫画 | ⬜ |
| 封面显示 | 查看卡片 | 显示漫画封面图 | ⬜ |
| 状态徽章 | 查看卡片 | 显示连载/完结徽章 | ⬜ |
| 卡片悬浮 | 鼠标悬停 | 卡片阴影效果 | ⬜ |
| 筛选联动 | 同时选分类+状态 | 正确过滤结果 | ⬜ |
| 详情跳转 | 点击卡片 | 跳转到详情页 | ⬜ |

#### 2.5 完结短漫测试 ✓
**测试路径**：`http://localhost/short`

| 测试项 | 操作 | 预期结果 | 状态 |
|--------|------|----------|------|
| 字母标签 | 查看顶部 | 显示A-Z字母按钮 | ⬜ |
| 点击字母 | 点击某个字母 | 跳转到对应位置 | ⬜ |
| 漫画列表 | 查看内容 | 按字母分组显示 | ⬜ |
| 完结徽章 | 查看漫画 | 显示"已完结"徽章 | ⬜ |
| 章节信息 | 查看描述 | 显示"全X话" | ⬜ |
| 资源链接 | 点击网盘按钮 | 新窗口打开链接 | ⬜ |

#### 2.6 日漫推荐测试 ✓
**测试路径**：`http://localhost/japan-recommend`

| 测试项 | 操作 | 预期结果 | 状态 |
|--------|------|----------|------|
| 作者标签 | 查看顶部 | 显示6个作者标签 | ⬜ |
| 封面网格 | 查看布局 | 3列网格，18本/页 | ⬜ |
| 分页显示 | 查看底部 | 显示分页器（20条数据需2页） | ⬜ |
| 标签筛选 | 选择某作者 | 显示该作者作品 | ⬜ |
| 翻页功能 | 点击下一页 | 跳转第2页 | ⬜ |
| 封面图片 | 查看卡片 | 封面正常显示 | ⬜ |
| 详情跳转 | 点击卡片 | 跳转到详情页 | ⬜ |

#### 2.7 固定模块测试 ✓

##### 日漫合集
**测试路径**：`http://localhost/japan-collection`

| 测试项 | 检查内容 | 预期结果 | 状态 |
|--------|----------|----------|------|
| 页面显示 | 查看内容 | 显示固定资源链接 | ⬜ |
| 使用说明 | 查看文字 | 显示详细使用指南 | ⬜ |
| 返回按钮 | 点击按钮 | 返回首页 | ⬜ |

##### 动漫合集
**测试路径**：`http://localhost/anime`

| 测试项 | 检查内容 | 预期结果 | 状态 |
|--------|----------|----------|------|
| 资源列表 | 查看内容 | 显示动漫资源链接 | ⬜ |
| 网盘链接 | 点击链接 | 新窗口打开 | ⬜ |

##### 广播剧合集
**测试路径**：`http://localhost/drama`

| 测试项 | 检查内容 | 预期结果 | 状态 |
|--------|----------|----------|------|
| 资源列表 | 查看内容 | 显示广播剧资源 | ⬜ |
| 播放说明 | 查看文字 | 显示使用教程 | ⬜ |

##### 失效反馈
**测试路径**：`http://localhost/feedback`

| 测试项 | 检查内容 | 预期结果 | 状态 |
|--------|----------|----------|------|
| 联系方式 | 查看内容 | 显示QQ/微信/邮箱 | ⬜ |
| 反馈说明 | 查看文字 | 显示反馈流程 | ⬜ |
| FAQ | 查看底部 | 显示常见问题 | ⬜ |

##### 防走丢
**测试路径**：`http://localhost/backup`

| 测试项 | 检查内容 | 预期结果 | 状态 |
|--------|----------|----------|------|
| 备用地址 | 查看列表 | 显示3个备用地址 | ⬜ |
| 社交媒体 | 查看链接 | 显示社交账号 | ⬜ |
| 使用提示 | 查看文字 | 显示收藏建议 | ⬜ |

#### 2.8 详情页测试 ✓
**测试路径**：`http://localhost/detail/1`

| 测试项 | 操作 | 预期结果 | 状态 |
|--------|------|----------|------|
| 基本信息 | 查看页面 | 显示标题/类型/标签 | ⬜ |
| 封面图片 | 查看左侧 | 显示漫画封面 | ⬜ |
| 资源链接 | 查看右侧 | 显示网盘链接 | ⬜ |
| 简介内容 | 查看描述 | 显示漫画简介 | ⬜ |
| 章节列表 | 滚动到底部 | 显示6个章节（测试数据） | ⬜ |
| 章节链接 | 点击章节 | 新窗口打开链接 | ⬜ |
| 浏览量 | 查看数字 | 显示浏览次数 | ⬜ |
| 浏览量增加 | 刷新页面 | 浏览量+1 | ⬜ |
| 奶黄色背景 | 日更/短漫类型 | 背景色#FFF8DC | ⬜ |
| 普通背景 | 其他类型 | 白色背景 | ⬜ |
| 返回按钮 | 点击按钮 | 返回上一页 | ⬜ |

#### 2.9 搜索功能测试 ✓
**测试路径**：`http://localhost/search`

| 测试项 | 操作 | 预期结果 | 状态 |
|--------|------|----------|------|
| 空搜索 | 不输入直接搜 | 显示"请输入搜索关键词" | ⬜ |
| 关键词搜索 | 输入"海贼" | 搜索到相关漫画 | ⬜ |
| 结果显示 | 查看列表 | 显示封面+标题+类型+标签 | ⬜ |
| 结果数量 | 查看顶部 | 显示"找到X个结果" | ⬜ |
| 无结果 | 搜索"不存在" | 显示"未找到相关漫画" | ⬜ |
| 特殊字符 | 搜索包含%或_ | 正常搜索不报错 | ⬜ |
| 详情跳转 | 点击结果 | 跳转到详情页 | ⬜ |

---

### 三、性能与安全测试

#### 3.1 性能测试

| 测试项 | 检查内容 | 预期结果 | 状态 |
|--------|----------|----------|------|
| 首页加载 | 测试加载时间 | <3秒 | ⬜ |
| 列表分页 | 20条数据加载 | <1秒 | ⬜ |
| 搜索响应 | 搜索查询时间 | <1秒 | ⬜ |
| 图片加载 | CDN资源加载 | <2秒 | ⬜ |
| 数据库查询 | 慢查询检查 | 无慢查询 | ⬜ |

#### 3.2 安全测试

| 测试项 | 检查内容 | 预期结果 | 状态 |
|--------|----------|----------|------|
| SQL注入 | 搜索框输入SQL | 参数化查询，无注入 | ⬜ |
| XSS攻击 | 输入脚本标签 | htmlspecialchars过滤 | ⬜ |
| 文件上传 | 上传非图片文件 | 类型验证，拒绝上传 | ⬜ |
| 大文件上传 | 上传>5MB图片 | 大小限制，拒绝上传 | ⬜ |
| 未登录访问 | 直接访问后台页面 | 自动跳转登录页 | ⬜ |
| 会话劫持 | 查看Cookie | httponly标记 | ⬜ |
| 敏感文件 | 访问.env/.git | Nginx规则拦截 | ⬜ |

---

### 四、浏览器兼容性测试

| 浏览器 | 版本 | 测试结果 | 备注 |
|--------|------|----------|------|
| Chrome | 最新版 | ⬜ | |
| Firefox | 最新版 | ⬜ | |
| Safari | 最新版 | ⬜ | |
| Edge | 最新版 | ⬜ | |
| 移动Chrome | 最新版 | ⬜ | |
| 移动Safari | 最新版 | ⬜ | |

---

### 五、响应式测试

| 设备 | 分辨率 | 测试结果 | 备注 |
|------|--------|----------|------|
| 桌面端 | 1920x1080 | ⬜ | |
| 笔记本 | 1366x768 | ⬜ | |
| 平板 | 768x1024 | ⬜ | |
| 手机 | 375x667 | ⬜ | |
| 手机横屏 | 667x375 | ⬜ | |

---

## 🐛 Bug报告模板

发现问题时，请按以下格式记录：

```markdown
### Bug #序号：简短描述

**重现步骤：**
1. 第一步操作
2. 第二步操作
3. 第三步操作

**预期结果：**
描述应该出现的结果

**实际结果：**
描述实际出现的结果

**截图：**
（如有）

**环境信息：**
- 浏览器：Chrome 120.0
- 操作系统：Windows 11
- PHP版本：8.0.30
- MySQL版本：5.7.44

**严重程度：**
[ ] 致命 [ ] 严重 [ ] 一般 [ ] 轻微

**备注：**
其他相关信息
```

---

## 📊 测试完成统计

测试完成后，请填写：

```
测试日期：____年__月__日
测试人员：________
测试环境：________

总测试项：___项
通过项：___项
失败项：___项
通过率：___%

发现Bug数：___个
- 致命Bug：___个
- 严重Bug：___个
- 一般Bug：___个
- 轻微Bug：___个

建议：
_______________________
_______________________
```

---

## 📝 测试注意事项

1. **测试顺序**：建议按文档顺序逐项测试，避免遗漏
2. **数据备份**：测试删除功能前，建议备份数据库
3. **清理缓存**：每次测试前清理浏览器缓存
4. **记录问题**：发现问题立即记录，便于后续修复
5. **多端测试**：重要功能需在多个浏览器测试
6. **网络环境**：测试时注意网络状况，避免误判

---

## 🎯 测试完成标准

- ✅ 所有核心功能测试通过
- ✅ 无致命和严重Bug
- ✅ 通过率 ≥ 95%
- ✅ 性能指标达标
- ✅ 主流浏览器兼容
- ✅ 响应式布局正常
- ✅ 安全测试通过
