# Nginx伪静态配置
# 在宝塔面板中，进入网站设置 -> 伪静态 -> 粘贴以下内容

location / {
    try_files $uri $uri/ /public/index.php?$query_string;
}

# 后台路由
location /admin88 {
    try_files $uri $uri/ /public/admin88/index.php?$query_string;
}

# 禁止访问敏感文件
location ~ \.(env|md|sql|log|git)$ {
    deny all;
}

# 禁止访问.git目录
location ~ /\.git {
    deny all;
}

# 允许访问uploads目录的图片
location ~* ^/public/uploads/.*\.(jpg|jpeg|png|gif|webp)$ {
    expires 30d;
    access_log off;
}

# PHP-FPM配置
location ~ \.php$ {
    fastcgi_pass unix:/tmp/php-cgi-80.sock;  # 根据实际PHP版本调整
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    include fastcgi_params;
}


